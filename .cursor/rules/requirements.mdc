---
alwaysApply: true
---
## Tech & Setup (IMPLEMENTED)
- Build: Vite + React + TypeScript âœ…
- UI: Tailwind CSS (utility-first), CSS variables for tokens âœ…
- State: Zustand âœ…
- Routing: React Router âœ…
- PWA: `vite-plugin-pwa` (offline & installable) âœ…
- Fonts: retro/console pixel fonts (`Press Start 2P`) âœ…
- Lint/Format: ESLint + TypeScript ESLint âœ…
- Analytics: Vercel Analytics âœ…
- i18n: KR copy only (strings centralized) âœ…

---

## Product Overview (IMPLEMENTED)
- **App name:** ë‘ë‡Œìˆ˜ë ¨ (Brain Training) âœ…
- **Home:** console-style **2-col card grid** (7 games) âœ…
- **Games:**
  1) **ê°€ìœ„ë°”ìœ„ë³´** â€“ ì§€ì‹œë¬¸ ê¸°ë°˜ ì„ íƒ, 2ì´ˆ íƒ€ì´ë¨¸ âœ…
  2) **ìˆœì„œëŒ€ë¡œ ìˆ«ì ëˆ„ë¥´ê¸°** â€“ 1ë¶€í„° 5ê¹Œì§€ ìˆœì„œëŒ€ë¡œ ëˆ„ë¥´ê¸° âœ…
  3) **ì¸ì¦ë²ˆí˜¸ ì™¸ìš°ê¸°** â€“ 6ìë¦¬ ìˆ˜ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸ âœ…
  4) **ë‹¬ëŸ¬ ì•”ì‚°** â€“ `$X` â†’ ì›í™”ë¡œ ì…ë ¥ (ê¸°ë³¸ í™˜ìœ¨ 1,400, ì„¤ì •ì—ì„œ ë³€ê²½ ê°€ëŠ¥) âœ…
  5) **í‰ â†” ã¡ í™˜ì‚°** â€“ 1í‰ = 3.3058ã¡ ë³€í™˜(ì–‘ë°©í–¥) âœ…
  6) **ê¿ˆì—ì„œ í• ì•„ë²„ì§€ê°€** â€“ ìˆ«ì ê¸°ì–µë ¥ + ë³µì¡í•œ ê³„ì‚° âœ…
  7) **ë±…ìƒ ìœ ì „ìê²€ì‚¬ ëŒ€ë¹„ í›ˆë ¨ì¥** â€“ ë°˜ì‘ì†ë„ ì¸¡ì • âœ…
  8) **2ì—°ì„ ì°¾ê¸°** â€“ ê°€ë¡œ/ì„¸ë¡œ/ëŒ€ê°ì„  2ì—°ì„ ì°¾ê¸° (5ë¼ìš´ë“œ, ë‚œì´ë„ ì¦ê°€) âœ…
- Each game launches a **3-10 question exam mode** (configurable) â†’ Result screen âœ…

---

## Console UI Guidelines (IMPLEMENTED)
- Palette: bg **#1C1C2A** (navy/black), fg **#E0E0E0**, accents **#FF5555 / #88FF88 / #5599FF** âœ…
- Components mimic **console windows/dialog boxes**:
  - Thick pixel borders (3px), subtle inner shadow âœ…
  - Focus/selection indicated by hover states (no sound) âœ…
- Typography: fixed-size pixel font (Press Start 2P) âœ…
- Key controls: on-screen **numeric keypad** (0â€“9, clear, submit), min touch 44px âœ…
- Microcopy: short, encouraging, console-like prompts (KR) âœ…

---

## Screens & Behaviors (IMPLEMENTED)

### 1) Home (Game Select) âœ…
- Layout
  - Title bar: "ë‘ë‡Œìˆ˜ë ¨" + í”½ì…€ ë§ˆìŠ¤ì½”íŠ¸ ğŸ§ 
  - Grid(2) **GameCard** list (6 games)
  - Card fields: icon, title, short desc, [ì‹œì‘í•˜ê¸°]
  - í•˜ë‹¨: ì„¤ì • ë²„íŠ¼ + í‘¸í„° í¬ë ˆë”§
- Example cards:
  - ê°€ìœ„ë°”ìœ„ë³´ â€“ "ì§€ì‹œë¬¸ì„ ë³´ê³ \n5ì´ˆ ì•ˆì— ì„ íƒ!"
  - ì¸ì¦ë²ˆí˜¸ ì™¸ìš°ê¸° â€“ "6ìë¦¬ ìˆ˜\nê¸°ì–µí•˜ê¸°"
  - ë‹¬ëŸ¬ ì•”ì‚° â€“ "$40 = ?ì›"
  - í‰ â†” ã¡ â€“ "1í‰ = ?ã¡"
  - ê¿ˆì—ì„œ í• ì•„ë²„ì§€ê°€ â€“ "ë­ë¼ê³  í•˜ì…¨ë”ë¼?"
  - ë±…ìƒ ìœ ì „ìê²€ì‚¬ ëŒ€ë¹„ í›ˆë ¨ì¥ â€“ "3,2,1... í´ë¦­!"
- Interaction: hover/pressed visual only; ì‹ ê·œ/ê³ ë‚œì´ë„ ë°°ì§€ í‘œì‹œ

### 2) Game â€“ Exam Mode (3-10 questions) âœ…
- Header: â† í™ˆìœ¼ë¡œ ë²„íŠ¼ + ë¬¸ì œ ì§„í–‰ë„ (Q3/5) + **ProgressBar**
- Body: ë¬¸ì œ í…ìŠ¤íŠ¸ (ì½˜ì†” ëŒ€ì‚¬ì°½ ìŠ¤íƒ€ì¼) + ë¬¸ì œ ì•„ì´ì½˜
- Input: **NumberInput** with **thousand separator** as typing (ë‹¬ëŸ¬/í‰ìˆ˜ ê²Œì„)
- Footer: **Keypad** (0â€“9, ì§€ìš°ê¸°, ì œì¶œ). ì œì¶œ disabled until input exists.
- Answer feedback (visual only):
  - Correct: green badge "â–¶ ì •ë‹µì…ë‹ˆë‹¤!"
  - Wrong: red badge "â–¶ ì˜¤ë‹µì…ë‹ˆë‹¤..."
  - Show calculation rationale (e.g., `400 Ã— 1,400 = 560,000`)
- Special features:
  - ê°€ìœ„ë°”ìœ„ë³´: 2ì´ˆ íƒ€ì´ë¨¸, ì‹œìŠ¤í…œ ì„ íƒ í‘œì‹œ, ì§€ì‹œë¬¸ ê¸°ë°˜ ì„ íƒ
  - ë°˜ì‘ì†ë„: íƒ€ì´ë¨¸ ê¸°ë°˜ ë°˜ì‘ì†ë„ ì¸¡ì •

### 3) Result âœ…
- Summary: score `80ì `, ë§ì¶˜ ê°œìˆ˜, optional elapsed time
- ê³µìœ  ê¸°ëŠ¥: "ë‚´ ê²°ê³¼ ìë‘í•˜ê¸°" (í´ë¦½ë³´ë“œ ë³µì‚¬)
- CTAs: [í™ˆìœ¼ë¡œ]
- ì„¤ì • ì§„ì…ì  (ë°˜ì‘ì†ë„ ê²Œì„ ì œì™¸)

### 4) Settings âœ…
- í™˜ìœ¨ ì…ë ¥(ìˆ«ì) - ë‹¬ëŸ¬ í™˜ìœ¨ ì„¤ì •
- ë¬¸ì œ ê°œìˆ˜ ì„¤ì • (3/5/7/10ê°œ) - 2x2 ê·¸ë¦¬ë“œ ì„ íƒ
- ìë™ ì €ì¥ ë©”ì‹œì§€

---

## Game Rules (IMPLEMENTED)

### ê°€ìœ„ë°”ìœ„ë³´ âœ…
- ì§€ì‹œë¬¸ ê¸°ë°˜ ì„ íƒ (ì´ê¸°ì§€ë„ ë¹„ê¸°ì§€ë„ ë§ì•„ì£¼ì„¸ìš” ë“±)
- 2ì´ˆ íƒ€ì´ë¨¸ ì œí•œ
- ì‹œìŠ¤í…œ ì„ íƒ í‘œì‹œ (âœŠâœ‹âœŒï¸)
- ì •ë‹µ: ì§€ì‹œë¬¸ì— ë§ëŠ” ì„ íƒ

### ì¸ì¦ë²ˆí˜¸ ì™¸ìš°ê¸° âœ…
- 6ìë¦¬ ìˆ«ì ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸
- ìˆ«ì í‘œì‹œ í›„ ê¸°ì–µí•˜ì—¬ ì…ë ¥

### ë‹¬ëŸ¬ ì•”ì‚° âœ…
- `$X` â†’ KRW using `exchangeRate` (default 1400, ì„¤ì •ì—ì„œ ë³€ê²½ ê°€ëŠ¥)
- ì²œ ë‹¨ìœ„ ìë™ í¬ë§·
- ë‚œì´ë„ë³„ ê¸ˆì•¡ ë²”ìœ„:
  - í•˜: 10~250, 10ì˜ ë°°ìˆ˜
  - ì¤‘: 10~600, ë‹¤ì–‘í•œ íŒ¨í„´
  - ìƒ: 15~1500, ë§¤ìš° ë‹¤ì–‘í•œ ë²”ìœ„

### í‰ â†” ã¡ âœ…
- 1í‰ = **3.3058ã¡**
- ì–‘ë°©í–¥ ë³€í™˜ (í‰â†’ã¡, ã¡â†’í‰)
- ë‚œì´ë„ë³„ ì†Œìˆ˜ì  ì²˜ë¦¬

### ê¿ˆì—ì„œ í• ì•„ë²„ì§€ê°€ âœ…
- ìˆ«ì ê¸°ì–µë ¥ + ë³µì¡í•œ ê³„ì‚°
- ì›ë³¸ ìˆ«ì ë°°ì—´ ê¸°ì–µ í›„ ê³„ì‚°

### ë±…ìƒ ìœ ì „ìê²€ì‚¬ ëŒ€ë¹„ í›ˆë ¨ì¥ âœ…
- ë°˜ì‘ì†ë„ ì¸¡ì •
- í‰ê·  ë°˜ì‘ì‹œê°„ ê³„ì‚°
- íƒ€ì´ë¨¸ ê¸°ë°˜ í…ŒìŠ¤íŠ¸

### 2ì—°ì„ ì°¾ê¸° âœ…
- 5ë¼ìš´ë“œ êµ¬ì„±, ê° ë¼ìš´ë“œë§ˆë‹¤ ë‚œì´ë„ ì¦ê°€
- ê°€ë¡œ 2ì—°ì„ë§Œ ì°¾ê¸° (ë‹¨ìˆœí™”)
- ê·¸ë¦¬ë“œ í¬ê¸°: 10Ã—10 â†’ 15Ã—15 â†’ 25Ã—25 â†’ 30Ã—30 â†’ 30Ã—30
- ì œí•œì‹œê°„: 10ì´ˆ â†’ 8ì´ˆ â†’ 5ì´ˆ â†’ 3ì´ˆ â†’ 1ì´ˆ
- ì‹¤ì œ 2ì—°ì„ì„ í´ë¦­í•˜ì—¬ ì°¾ê¸°
- í‹°ì¼“íŒ… ë°©ì‹: 2ì—°ì„ê³¼ ë–¨ì–´ì ¸ ìˆëŠ” ê°œë³„ ì…€ë“¤ë„ ì¡´ì¬
- ConsoleWindow ì•ˆì—ì„œ ê·¸ë¦¬ë“œê°€ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ìµœì í™”
- ì½”ë“œ ì¤‘ë³µ ì œê±° ë° ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬

---

## State & Persistence (IMPLEMENTED)
- `SettingsStore`: exchangeRate, questionCount, uiMode("grid") âœ…
- `DailyQuizStore`: seed(date+difficulty), currentQuestion, answers[], score âœ…
- Persistence: localStorage (settings, quiz state) âœ…
- Analytics: Vercel Analytics integration âœ…

---

## Data & Types (IMPLEMENTED)
```ts
type Difficulty = "easy" | "medium" | "hard";

type QuestionType = "USD_TO_KRW" | "PYEONG_TO_SQM" | "SQM_TO_PYEONG" | "VERIFICATION_CODE" | "DREAM_GRANDFATHER" | "REACTION_TIME" | "ROCK_PAPER_SCISSORS" | "NUMBER_SEQUENCE" | "TWO_IN_A_ROW";

type RockPaperScissors = "rock" | "paper" | "scissors";
type RPSPrompt = 
  | "ì´ê¸°ì§€ë„ ë¹„ê¸°ì§€ë„ ë§ì•„ì£¼ì„¸ìš”"
  | "ë¹„ê¸°ì§€ë„ ë§ê³ \nì§€ì§€ë„ ë§ì•„ì£¼ì„¸ìš”"
  | "ì´ê¸°ì§€ë„ ì§€ì§€ë„ ë§ì•„ì£¼ì„¸ìš”";

type Question = {
  id: string;
  type: QuestionType;
  prompt: string;
  icon?: string;
  answer: number;
  originalNumbers?: number[]; // ì›ë³¸ ìˆ«ì ë°°ì—´ (DREAM_GRANDFATHER íƒ€ì…ìš©)
  format?: { 
    decimals?: number; 
    thousand?: boolean;
  };
  // ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ìš© í•„ë“œë“¤
  systemChoice?: RockPaperScissors;
  rpsPrompt?: RPSPrompt;
  timeLimit?: number; // 5ì´ˆ ì œí•œì‹œê°„
};

type GameResult = {
  date: string; 
  difficulty: Difficulty;
  total: number; 
  correct: number; 
  ms?: number;
  reactionTimes?: number[]; // ë°˜ì‘ì†ë„ ê²Œì„ì˜ ê° ë¬¸ì œë³„ ë°˜ì‘ì‹œê°„
  averageReactionTime?: number; // ë°˜ì‘ì†ë„ ê²Œì„ì˜ í‰ê·  ë°˜ì‘ì‹œê°„
};

type Settings = {
  exchangeRate: number;
  difficulty: Difficulty;
  uiMode: "grid" | "menu";
  questionCount: 3 | 5 | 7 | 10;
};

type DailyQuizState = {
  seed: string;
  currentQuestion: number;
  answers: (number | null)[];
  score: number;
  startTime?: number;
  endTime?: number;
};
```

---

## Files (IMPLEMENTED)

```
src/
  App.tsx âœ…
  routes/
    Home.tsx âœ…
    GameDollar.tsx âœ…
    GameArea.tsx âœ…
    GameVerification.tsx âœ…
    GameDream.tsx âœ…
    GameReaction.tsx âœ…
    GameNumberSequence.tsx âœ…
    GameRPS.tsx âœ…
    GameRPSBurning.tsx âœ…
    GameTwoInARow.tsx âœ…
    Result.tsx âœ…
    Settings.tsx âœ…
  components/
    ConsoleWindow.tsx âœ…
    GameCard.tsx âœ…
    NumberInput.tsx âœ…
    Keypad.tsx âœ…
    ProgressBar.tsx âœ…
    FeedbackBadge.tsx âœ…
  stores/
    settings.ts âœ…
    dailyQuiz.ts âœ…
  types/
    index.ts âœ…
  lib/
    rng.ts âœ…
    quiz/
      dollar.ts âœ…
      area.ts âœ…
      verification.ts âœ…
      dream.ts âœ…
      reaction.ts âœ…
      rps.ts âœ…
    format.ts âœ…
    gameCalculators/
      index.ts âœ…
  index.css âœ…
```

---

## Implementation Notes (IMPLEMENTED)

* âœ… Keep **pure functions** for question generation (seeded RNG) and formatting
* âœ… Thousand separator: format only for view; keep numeric value canonical
* âœ… All interactive elements meet 44px touch min; keyboard/focus a11y
* âœ… No audio APIs, no vibration API usage
* âœ… Mobile-first responsive design (355px ìµœì í™”)
* âœ… PWA with offline support
* âœ… Vercel Analytics integration
* âœ… Zustand state management with persistence

---

## Acceptance Criteria (ALL COMPLETED)

* âœ… Home shows **console-style** selection (2-col grid) with 8 games
* âœ… Each game runs **3-10 questions** (configurable) with progress and keypad input
* âœ… Visual-only feedback (correct/wrong + rationale), **no sound/vibration**
* âœ… Settings persist; exchange rate affects dollar quiz; question count works
* âœ… Daily deterministic sets via seed; results saved to localStorage
* âœ… PWA installable; app shell works offline after first load
* âœ… UI follows console window/dialog look & retro font & palette tokens
* âœ… Mobile optimization for 355px and smaller screens
* âœ… Analytics tracking for game starts and completions

---

## Non-Goals (MVP) - RESPECTED

* âœ… No backend, no authentication, no analytics (except Vercel)
* âœ… No leaderboard/social (except share feature)
* âœ… No audio/rumble effects

---

## Current Features & Capabilities

### ğŸ® Games
1. **ê°€ìœ„ë°”ìœ„ë³´** - ì§€ì‹œë¬¸ ê¸°ë°˜ ì„ íƒ ê²Œì„
2. **ìˆœì„œëŒ€ë¡œ ìˆ«ì ëˆ„ë¥´ê¸°** - 1ë¶€í„° 5ê¹Œì§€ ìˆœì„œëŒ€ë¡œ ëˆ„ë¥´ê¸°
3. **ì¸ì¦ë²ˆí˜¸ ì™¸ìš°ê¸°** - ìˆ«ì ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸
4. **ë‹¬ëŸ¬ ì•”ì‚°** - í™˜ìœ¨ ê³„ì‚° ê²Œì„
5. **í‰ìˆ˜ ë³€í™˜** - ë©´ì  ë‹¨ìœ„ ë³€í™˜
6. **ê¿ˆì—ì„œ í• ì•„ë²„ì§€ê°€** - ë³µí•© ê¸°ì–µë ¥ ê²Œì„
7. **ë±…ìƒ ìœ ì „ìê²€ì‚¬ ëŒ€ë¹„ í›ˆë ¨ì¥** - ë°˜ì‘ì†ë„ ì¸¡ì •
8. **2ì—°ì„ ì°¾ê¸°** - ê°€ë¡œ/ì„¸ë¡œ/ëŒ€ê°ì„  2ì—°ì„ ì°¾ê¸° (5ë¼ìš´ë“œ, ë‚œì´ë„ ì¦ê°€)

### âš™ï¸ Settings
- í™˜ìœ¨ ì„¤ì • (ë‹¬ëŸ¬â†’ì›í™”)
- ë¬¸ì œ ê°œìˆ˜ ì„¤ì • (3/5/7/10ê°œ)
- ìë™ ì €ì¥

### ğŸ“± Technical Features
- PWA (Progressive Web App)
- Offline support
- Mobile optimized (355px)
- Touch-friendly UI
- Vercel Analytics
- Zustand state management
- LocalStorage persistence

### ğŸ¨ UI/UX
- Console game aesthetic
- Press Start 2P font
- Pixel art borders
- Retro color palette
- Responsive design
- Accessibility support


4. Wire Home â†’ Game flows, 10Q loop, per-question feedback, Result.
5. Settings (exchangeRate, difficulty, area precision) + persistence.
6. PWA config + offline testing; a11y focus/roles pass.

- ì½”ë“œë¥¼ ì‘ì—…í•˜ê³  ë‚˜ì„œëŠ” í•­ìƒ requirements.mdcë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
- ì½”ë“œë¥¼ ì‘ì—…í•˜ê³  ë‚˜ì„œëŠ” í•­ìƒ `npm run build`ë¥¼ ì‹¤í–‰í•´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

